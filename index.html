<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IBC Service Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <script>
    if (sessionStorage.getItem('loggedIn') !== 'true') {
      window.location.href = 'login.html';
    }
  </script>

  <nav class="navbar">
    <div class="nav-brand">
      <span class="logo">üîß</span>
      <span class="brand-text">IBC Service</span>
    </div>
    <div class="nav-user">
      <span class="welcome">Welcome, <strong id="username"></strong></span>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </nav>

  <div class="container">
    <!-- Add Customer Form Card -->
    <div class="card form-card">
      <div class="card-header">
        <h2>‚ûï Add New Customer</h2>
      </div>
      <div class="card-body">
        <form id="customerForm" class="customer-form">
          <div class="form-row">
            <div class="form-group">
              <label for="name">Customer Name *</label>
              <input id="name" type="text" placeholder="Enter customer name" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number *</label>
              <input id="phone" type="tel" placeholder="Enter phone number" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="email">Email Address</label>
              <input id="email" type="email" placeholder="Enter email (optional)">
            </div>
            <div class="form-group">
              <label for="service">Service Type *</label>
              <input id="service" type="text" placeholder="Enter service type" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="entryDate">Entry Date *</label>
              <input id="entryDate" type="date" required>
            </div>
            <div class="form-group">
              <label for="returnDate">Return Date</label>
              <input id="returnDate" type="date">
            </div>
          </div>
          
          <button type="submit" class="submit-btn">
            <span class="btn-text">Add Customer</span>
            <span class="btn-loading" style="display: none;">Adding...</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Search & Actions Card -->
    <div class="card">
      <div class="card-body">
        <div class="search-actions">
          <div class="search-group">
            <input id="searchInput" type="text" placeholder="üîç Search customers..." class="search-input">
          </div>
          <div class="action-buttons">
            <button id="refreshBtn" class="action-btn refresh-btn">üîÑ Refresh</button>
            <button id="printBtn" class="action-btn print-btn">üñ®Ô∏è Print List</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Customer List Card -->
    <div class="card table-card">
      <div class="card-header">
        <h2>Customer List (<span id="recordCount">0</span> Records)</h2>
      </div>
      <div class="card-body">
        <div class="table-container">
          <table id="customerTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Service</th>
                <th>Entry Date</th>
                <th>Return Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
